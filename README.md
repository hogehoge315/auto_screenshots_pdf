# 🌾 電子書籍スクリーンショットPDF生成ツール

このスクリプトは、Webブラウザで表示されている電子書籍のスクリーンショットを自動的に撮影し、1つのPDFファイルにまとめるツールです。

**⚠️ 重要な注意事項**

- このスクリプトはMac専用です（macOS向け）
- 利用に際してはお使いのサイトの利用規約等をよく確認し、自己責任で実行してください
- 著作権法を遵守してご利用ください

## 📋 必要なもの

- macOS（Mac）
- Webブラウザ（Google Chromeを推奨）
- Homebrew（Macのパッケージ管理ツール）
- ターミナル（Macに標準搭載）

## 🔧 初期セットアップ

### 1. Homebrewのインストール（未インストールの場合）

ターミナルを開いて以下のコマンドを実行：

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

### 2. pdfuniteのインストール

ターミナルで以下のコマンドを実行：

```bash
brew install poppler
```

## 📝 使い方

### ステップ1: script.sh の設定を編集

`script.sh` ファイルをテキストエディタで開き、以下の項目を設定します：

```bash
browser_app_name="Chrome"  # 使用するブラウザアプリ名
key="key code 124"         # ページめくりのキー（右矢印キー）
page=100                   # 撮影するページ数（★この行を追加してください★）
ptslp=0.1                  # ページ読み込み待機時間（秒）
npslp=0.2                  # スクリーンショット後の待機時間（秒）
```

**重要**: `page=100` のような行を追加して、撮影したいページ数を指定してください。

#### 各設定の説明

- **browser_app_name**: 電子書籍を開くブラウザの名前
  - Chrome の場合: `"Chrome"`
  - Safari の場合: `"Safari"`
  - その他: アプリケーション名を指定

- **page**: 撮影するページ数
  - 例: 50ページ撮影する場合 → `page=50`
  - 例: 200ページ撮影する場合 → `page=200`

- **ptslp**: ページ遷移後の待機時間（秒）
  - ページの読み込みが遅い場合は `0.5` など大きめの値に設定
  - 高速な場合は `0.1` のまま

- **npslp**: スクリーンショット撮影後の待機時間（秒）
  - ページめくりのアニメーションがある場合は `0.5` など大きめの値に設定

### ステップ2: スクリーンショット範囲の指定

1. 電子書籍をブラウザで開き、最初のページを表示します
2. **Cmd + Shift + 4** を押します（macOSのスクリーンショット機能が起動）
3. 電子書籍の表示範囲をドラッグで選択します
4. **Escキー** を押してキャンセルします（実際には撮影しません）
   - これにより、選択した範囲がmacOSに記憶されます

### ステップ3: スクリプトの実行

1. ターミナルを開く
2. このフォルダに移動（`cd` コマンドを使用）

```bash
cd /Users/younaka315/github.com/hogehoge315/auto_screenshots_pdf
```

3. 以下のコマンドを実行：

```bash
source script.sh
```

4. スクリプトが自動的にスクリーンショットを撮影し、PDFを生成します
5. 完了すると `output.pdf` が作成されます

## ⚠️ トラブルシューティング

### エラー: `pdfunite: command not found`

→ pdfuniteがインストールされていません。セットアップの手順2を実行してください

### スクリーンショットが正しく撮影されない

→ ステップ2で範囲指定を正しく行ってください（Cmd + Shift + 4で範囲選択後、Escでキャンセル）

### ページが途中で止まる

→ `ptslp` と `npslp` の値を大きくしてください（例: `0.5`）

### ブラウザが反応しない

→ `browser_app_name` の設定を確認してください

### アクセス許可のエラー

→ システム環境設定 > セキュリティとプライバシー > プライバシー で、ターミナルに「画面収録」と「アクセシビリティ」の権限を付与してください

## 📂 出力ファイル

- `output.pdf`: 生成されたPDFファイル
- `.photos/`: 一時的なスクリーンショットフォルダ（自動削除されます）

## 🤝 ライセンス

このプロジェクトのライセンスについては LICENSE ファイルを参照してください。
